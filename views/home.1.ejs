<% include ./partials/header.ejs%>

  <div class="container">
    <h2>User :
      <%= users.name%>
    </h2>
    <h4>Battle Point:
      <%= users.battlepoint %>
    </h4>
    <h4>Win Rate:
      <%= winRateUser(matches).winUserrate %>%</h4>

    <p>
      <b>Robot</b>
    </p>
    <div class="col-sm-4">
      <form action="/bot/add" method="POST">
        <div class="form-group">
          <label>Robot Name:</label>
          <input type="text" class="form-control" name="name">
        </div>
        <button type="submit" class="btn btn-default">Add Robot</button>
      </form>
    </div>

    <div class="col-sm-8">
      <table class="table">
        <thead>
          <tr>
            <th>Robot Name</th>
            <th>Total Match</th>
            <th>Winner Rate</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <% users.Robots.forEach(function(robot,idx){ %>
            <tr>
              <td>
                <%= robot.name%>
              </td>
              <td>
                <%= robotMatch[idx].RobotMatches.length%>
              </td>
              <td>
                <%= winRate(robotMatch[idx].RobotMatches) %> %</td>
              <td>
                <button type="submit" class="btn btn-default">Edit</button>
                <button type="submit" class="btn btn-default">Delete</button>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>

    <p>
      <b>Match</b>
    </p>
    <div class="col-sm-4">
      <form action="/userMatch/add" method="POST">
        <div class="form-group">
          <label>Match Name:</label>
          <input type="text" class="form-control" name="name">
        </div>
        <div class="form-group">
          <label>Bet Point:</label>
          <input type="text" class="form-control" name="betPoint">
        </div>
        <div class="form-group">
          <label>Location:</label>
          <input type="text" class="form-control" name="location">
        </div>
        <div class="form-group">
          <label>Open Batte Data:</label>
          <input type="text" class="form-control" name="dateBattle">
        </div>
        <button type="submit" class="btn btn-default">Open Battle</button>
      </form>
    </div>

    <div class="col-sm-8">
      <table class="table">
        <thead>
          <tr>
            <th>Match Name</th>
            <th>Robot Name</th>
            <th>Status</th>
            <th>Bet Point</th>
            <th>Location</th>
            <th>Open Battle Date</th>
          </tr>
        </thead>
        <tbody>
          <% matches.forEach(function(match, idy){ %>
            <% match.Matches.forEach(function(tanding, idx){ %>
              <tr>
                <td>
                  <%= tanding.name %>
                </td>
                <td>
                  <%= match.name %>
                </td>
                <td>
                  <%= robotMatch[idy].RobotMatches[idx].status %>
                </td>
                <td>
                  <%= tanding.betPoint.toLocaleString() %>
                </td>
                <td>
                  <%= tanding.location %>
                </td>
                <td>
                  <%= tanding.dateBattle %>
                </td>
              </tr>
            <% }) %>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>

<% include ./partials/header.ejs%>
